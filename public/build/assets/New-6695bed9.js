import{Z as P,r as m,o,c as a,a as i,w as n,F as f,b as u,d as S,f as b,t as g,g as h,h as k,n as y,e as I}from"./app-47542bc8.js";import{A as B}from"./GridApp-e6c21bc8.js";import w from"./Form-39740bbb.js";import{F as x}from"./FormGroup-bbe14fd4.js";import{I as H}from"./InlineData-cde6eae2.js";import{S as O}from"./Select-1c0f197e.js";import{I as R}from"./Input-e240fc7b.js";import{B as L}from"./Button-2675284e.js";import{L as F}from"./Label-c3944de9.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import"./Index-1363edf9.js";import"./ApplicationLogo-1d2a1eb8.js";import"./Index-2005e6e4.js";import"./ValidationErrors-11051cb5.js";import"./Textarea-98b4fcf3.js";import"./LetterHead-96c26f72.js";const U={components:{Head:P,AppLayout:B,FormComponent:w,FormGroup:x,InlineData:H,Select:O,Input:R,Button:L,Label:F},props:{data:{type:Object,default:{}}},computed:{isValided(){return!!this.form.admission&&(!this.form.is_multiple_purpose&&!!this.form.purpose||!0)}},created(){this.registration=this.data.registration,this.registrationHandler(),this.form.purpose=this.data.purposeId,Number(this.data.purposeId)>0&&this.form.purposes.push(Number(this.data.purposeId))},data(){return{form:this.$inertia.form({admission:"",purpose:"",purposes:[],is_multiple_purpose:!0}),classId:"",roll:"",studentName:"",registration:"",paidPurpose:[],duePurposeId:"",due:0}},methods:{submit(){if(this.isValided)return this.form.get(this.route("payments.create"))},registrationHandler(){this.resetDuringRegistrationSelect(),this.resetCommonData();let s=Object.values(this.data.admissions).filter(t=>t.student.registration==this.registration)[0];s&&(this.setCommonData(s),this.setDuringRegistrationSelect(s)),this.form.purpose=""},classOrRollHandler(){this.resetDuringclassOrRollSelect(),this.resetCommonData();let s=null;this.classId&&this.roll&&(s=Object.values(this.data.admissions).filter(t=>t.class_id==this.classId&&t.roll==this.roll)[0]),s&&(this.setCommonData(s),this.setDuringclassOrRollSelect(s)),this.form.purpose=""},setCommonData(s){this.form.admission=s.id,this.studentName=s.student.name,this.paidPurpose=s.student.payment_purpose.map(t=>Number(t)),this.duePurposeId=s.student.duePurposeId,this.due=s.student.due},setDuringRegistrationSelect(s){this.roll=s.roll,this.classId=s.class_id},setDuringclassOrRollSelect(s){this.registration=s.student.registration},resetCommonData(){this.form.admission="",this.studentName="",this.paidPurpose="",this.duePurposeId="",this.due=0},resetDuringRegistrationSelect(){this.roll="",this.classId=""},resetDuringclassOrRollSelect(){this.registration=""},multiPurposeHandler(s){let t=s.target;if(t.checked)this.form.purposes.push(parseInt(t.value));else{let p=this.form.purposes.indexOf(parseInt(t.value));this.form.purposes.splice(p,1)}}}},j={class:"w-full max-w-lg rounded border bg-white p-4 shadow"},q=u("h2",{class:"mb-2 text-center text-2xl font-bold text-brand-600 print:text-black"}," টাকা জমার রশিদ ",-1),A={class:"grid gap-4 md:grid-cols-3"},M=u("option",{value:""},"-- নির্বাচন করুন --",-1),z=["value"];const E=u("option",{value:""},"-- নির্বাচন করুন --",-1),G=["value","disabled","innerHTML"],Z={key:1,class:"col-span-full rounded-xl border border-dashed p-4"},J={key:0,class:"flex items-center gap-2"},K=u("input",{type:"checkbox",checked:"",disabled:""},null,-1),Q=["value","checked"],W={key:1},X={class:"mt-4 flex items-center justify-end"};function Y(s,t,p,$,l,d){const V=m("Head"),N=m("Select"),c=m("form-group"),_=m("Input"),v=m("Button"),C=m("app-layout");return o(),a(f,null,[i(V,{title:"নতুন রশিদ"}),i(C,null,{default:n(()=>[u("div",j,[q,u("form",{onSubmit:t[8]||(t[8]=S((...e)=>d.submit&&d.submit(...e),["prevent"])),class:""},[u("div",A,[i(c,{class:"col-span-2",label:"ক্লাস"},{default:n(()=>[i(N,{class:"block w-full",modelValue:l.classId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.classId=e),onChange:d.classOrRollHandler,required:""},{default:n(()=>[M,(o(!0),a(f,null,b(p.data.classes,e=>(o(),a("option",{key:e.id,value:e.id},g(e.name),9,z))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),i(c,{class:"",label:"রোল"},{default:n(()=>[i(_,{class:"block w-full",type:"Number",modelValue:l.roll,"onUpdate:modelValue":t[1]||(t[1]=e=>l.roll=e),onInput:d.classOrRollHandler,required:""},null,8,["modelValue","onInput"])]),_:1}),i(c,{class:"col-span-2",label:"শিক্ষার্থীর নাম"},{default:n(()=>[i(_,{class:"block w-full",type:"text",disabled:"",modelValue:l.studentName,"onUpdate:modelValue":t[2]||(t[2]=e=>l.studentName=e)},null,8,["modelValue"])]),_:1}),i(c,{class:"",label:"রেজি. নং"},{default:n(()=>[i(_,{class:"block w-full",type:"Number",modelValue:l.registration,"onUpdate:modelValue":t[3]||(t[3]=e=>l.registration=e),onInput:d.registrationHandler,required:""},null,8,["modelValue","onInput"])]),_:1}),h("",!0),i(c,{class:"col-span-full",label:"বাবদ নির্বাচন করুন"},{default:n(()=>[l.form.is_multiple_purpose?(o(),a("div",Z,[l.due?(o(),a("label",J,[K,u("span",null,[I(" বকেয়া : "),u("b",null,g(l.due),1),I(" টাকা ")])])):h("",!0),(o(!0),a(f,null,b(p.data.purposes,(e,r)=>(o(),a("label",{key:r,class:y(["flex items-center gap-2",{hidden:Array.isArray(e.classIds)?!(e.classIds.includes(Number(this.classId))||e.classIds.includes(String(this.classId))):!1}])},[l.paidPurpose.includes(Number(r))?h("",!0):(o(),a("input",{key:0,type:"checkbox",value:r,onChange:t[7]||(t[7]=(...D)=>d.multiPurposeHandler&&d.multiPurposeHandler(...D)),checked:Number(r)===Number(p.data.purposeId)},null,40,Q)),l.paidPurpose.includes(Number(r))?h("",!0):(o(),a("span",W,g(s.$e2bnumber(e.title)),1))],2))),128))])):(o(),k(N,{key:0,class:"block w-full",modelValue:l.form.purpose,"onUpdate:modelValue":t[6]||(t[6]=e=>l.form.purpose=e),required:""},{default:n(()=>[E,(o(!0),a(f,null,b(p.data.purposes,(e,r)=>(o(),a("option",{key:r,value:r,class:y({hidden:Array.isArray(e.classIds)?!(e.classIds.includes(Number(this.classId))||e.classIds.includes(String(this.classId))):!1}),disabled:l.paidPurpose.includes(Number(r))&&Number(l.duePurposeId)!==Number(r),innerHTML:(l.paidPurpose.includes(Number(r))?Number(l.duePurposeId)===Number(r)&&l.due>0?"⚠ (বকেয়া) ":"✓ ":"")+e.title},null,10,G))),128))]),_:1},8,["modelValue"]))]),_:1})]),u("div",X,[d.isValided?(o(),k(v,{key:0,type:"submit"},{default:n(()=>[I(" পরবর্তী ধাপ → ")]),_:1})):h("",!0)])],32)])]),_:1})],64)}const _e=T(U,[["render",Y]]);export{_e as default};
