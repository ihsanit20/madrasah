import{i as w,r as p,o as d,c,b as t,a as o,d as T,w as u,t as l,n as I,F as V,g as m,e as j}from"./app-a7f62443.js";import{V as C}from"./ValidationErrors-bac551cf.js";import{L}from"./Label-4a8a478c.js";import{B as S}from"./Button-2fbf7fff.js";import{I as B}from"./Input-41b528ec.js";import{S as P}from"./Select-0e60ebb8.js";import{F as H}from"./FormHeading-29b8e083.js";import{F as A}from"./FormGroup-08297dd3.js";import{F as E}from"./FormSlotGroup-3946b710.js";import{I as N}from"./InlineData-ba3b782a.js";import{S as D}from"./SimpleTable-9c52da1d.js";import{T as O}from"./TableTd-5ba2c240.js";import{T as R}from"./TableTh-689d8f0d.js";import{P as U}from"./PrintButton-65ebb953.js";import{L as M}from"./LetterHead-dc82bfbd.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./TrashIcon-09a21e72.js";import"./PlusCircleIcon-621f2dfd.js";import"./PaginatorLinks-3ef111cf.js";import"./ApplicationLogo-bf7d8203.js";const z={components:{Link:w,ValidationErrors:C,Label:L,Button:S,Input:B,Select:P,FormHeading:H,FormGroup:A,FormSlotGroup:E,InlineData:N,SimpleTable:D,TableTd:O,TableTh:R,PrintButton:U,LetterHead:M},props:{moduleAction:String,buttonValue:{type:String,default:"পরবর্তী ধাপ &#8594;"},data:{type:Object,default:{}}},created(){this.dataPushIntoFeeArray("yearlyFees"),this.dataPushIntoFeeArray("monthlyFees")},data(){return{form:this.$inertia.form({step:3,fees:[]}),fees:{yearlyFees:[],monthlyFees:[]},editable:!1}},methods:{submit(){if(this.moduleAction=="update")return this.updateFeeData(),this.form.put(this.route("admissions.update",this.data.admission.id))},concessionHandler(e){e.concession>e.fee_amount&&(e.concession=e.fee_amount),(!e.concession||e.concession<0)&&(e.concession=0),e.concession=Number(e.concession)},dataPushIntoFeeArray(e){Object.values(this.data[e]).forEach(n=>{let i=this.data.admission.concessions.filter(b=>b.id===n.feeId)[0];this.fees[e].push({fee_id:n.feeId,fee_name:n.name,fee_amount:n.amount,concession:i?i.amount:0})})},updateFeeData(){this.form.fees.length=0,this.dataPushIntoFormFees("yearlyFees"),this.dataPushIntoFormFees("monthlyFees")},dataPushIntoFormFees(e){this.fees[e].forEach(n=>{n.concession&&this.form.fees.push({id:n.fee_id,amount:n.concession})})},getFeeTotal(e){let n=0;return Object.values(this.fees[e]).forEach(i=>{n+=parseInt(i.fee_amount)}),n},getConcessionTotal(e){let n=0;return Object.values(this.fees[e]).forEach(i=>{n+=parseInt(i.concession)}),n}}},q={class:"flex w-full max-w-3xl justify-end print:hidden"},J={class:"w-full max-w-3xl rounded border bg-white p-4 print:rounded-none print:border-0"},K=t("h2",{class:"mt-4 mb-2 text-center text-2xl font-bold text-brand-600 print:text-black"}," প্রদেয় ফি নির্ধারণ ",-1),Q={class:"grid gap-x-2 print:grid-cols-3 md:grid-cols-3"},W={class:"col-span-2"},X={class:"col-span-2"},Y=t("hr",{class:"print:hidden"},null,-1),Z={class:"flex items-center justify-start print:hidden"},$={class:"flex items-center gap-2"},tt=t("span",{class:"-mb-0.5"},"ছাড় পরিবর্তন চালু করুন",-1),et={class:"grid gap-4 print:grid-cols-2 md:grid-cols-2"},st=t("th",{class:"py-2 px-2 text-left text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," ভর্তিকালীন প্রদেয় ",-1),nt=t("th",{class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," নির্ধারিত টাকা ",-1),ot={key:0,class:"py-2 pr-3 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:hidden print:text-black md:text-sm"},at={class:"whitespace-nowrap py-2 px-2 text-left text-xs font-medium text-gray-900 dark:text-white md:text-sm"},it={class:"whitespace-nowrap py-2 px-2 text-right text-xs font-medium text-gray-900 dark:text-white md:text-sm"},rt={class:"flex justify-end gap-2"},lt={key:0,class:"text-gray-400 print:hidden"},dt={key:0,class:"pr-1.5 print:hidden"},ct={class:"flex items-center justify-end"},mt={colspan:"2",class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"},pt={class:"flex justify-end gap-2"},ut=t("span",null,"মোট: ",-1),ht={key:0,class:"text-gray-400 print:hidden"},xt={key:0,class:"pr-2 text-right text-rose-500 print:hidden"},_t=t("th",{class:"py-2 px-2 text-left text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," মাসিক প্রদেয় ",-1),bt=t("th",{class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," নির্ধারিত টাকা ",-1),yt={key:0,class:"py-2 pr-3 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:hidden print:text-black md:text-sm"},ft={class:"whitespace-nowrap py-2 px-2 text-left text-xs font-medium text-gray-900 dark:text-white md:text-sm"},gt={class:"whitespace-nowrap py-2 px-2 text-right text-xs font-medium text-gray-900 dark:text-white md:text-sm"},kt={class:"flex justify-end gap-2"},vt={key:0,class:"text-gray-400 print:hidden"},Ft={key:0,class:"pr-1.5 print:hidden"},wt={class:"flex items-center justify-end"},Tt={colspan:"2",class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"},It={class:"flex justify-end gap-2"},Vt=t("span",null,"মোট: ",-1),jt={key:0,class:"text-gray-400 print:hidden"},Ct={key:0,class:"pr-2 text-right text-rose-500 print:hidden"},Lt={class:"hidden print:block"},St=t("h3",{class:"mt-10 hidden text-center text-2xl font-bold text-brand-600 print:block print:text-black"}," অভিভাবকের অঙ্গিকার ",-1),Bt={class:"whitespace-pre-wrap text-justify"},Pt={class:"flex justify-between"},Ht={class:"pt-10"},At={class:"pt-10"},Et=t("hr",{class:"print:hidden"},null,-1),Nt={class:"flex items-center justify-between print:hidden"};function Dt(e,n,i,b,a,r){const f=p("print-button"),g=p("validation-errors"),k=p("letter-head"),h=p("inline-data"),_=p("Input"),y=p("simple-table"),v=p("Link"),F=p("Button");return d(),c(V,null,[t("div",q,[o(f)]),t("div",J,[o(g,{class:"mb-4"}),t("form",{onSubmit:n[1]||(n[1]=T((...s)=>r.submit&&r.submit(...s),["prevent"])),class:"space-y-4"},[o(k),K,t("div",Q,[t("div",W,[o(h,{title:"শিক্ষার্থীর নাম:",value:i.data.student.name},null,8,["value"])]),t("div",null,[o(h,{title:"ফরম নাম্বার:",value:i.data.admission.id},null,8,["value"])]),t("div",X,[o(h,{title:"ভর্তিচ্ছু বিভাগ/শ্রেণী:",value:i.data.admission.className},null,8,["value"])]),t("div",null,[o(h,{title:"শিক্ষার্থীর ধরন:",value:i.data.student.residentText},null,8,["value"])])]),Y,t("div",Z,[t("label",$,[o(_,{type:"checkbox",checked:a.editable,onClick:n[0]||(n[0]=s=>a.editable=!a.editable)},null,8,["checked"]),tt])]),t("div",et,[o(y,{columns:e.columns1,collections:a.fees.yearlyFees,totalRow:!0},{header:u(()=>[st,nt,a.editable?(d(),c("th",ot," ছাড় ")):m("",!0)]),default:u(({item:s})=>[t("td",at,l(s.fee_name),1),t("td",it,[t("div",rt,[s.concession?(d(),c("del",lt,l(e.$e2bnumber(s.fee_amount)),1)):m("",!0),t("span",null,l(e.$e2bnumber(s.fee_amount-s.concession)),1)])]),a.editable?(d(),c("td",dt,[t("div",ct,[o(_,{disabled:!a.editable,type:"number",modelValue:s.concession,"onUpdate:modelValue":x=>s.concession=x,class:"block w-14 px-1 py-0.5 text-right",onInput:x=>r.concessionHandler(s)},null,8,["disabled","modelValue","onUpdate:modelValue","onInput"])])])):m("",!0)]),totalRow:u(()=>[t("th",mt,[t("div",pt,[ut,r.getConcessionTotal("yearlyFees")?(d(),c("del",ht,l(e.$e2bnumber(r.getFeeTotal("yearlyFees"))),1)):m("",!0),t("span",null,l(e.$e2bnumber(r.getFeeTotal("yearlyFees")-r.getConcessionTotal("yearlyFees"))),1)])]),a.editable?(d(),c("th",xt,l(r.getConcessionTotal("yearlyFees")),1)):m("",!0)]),_:1},8,["columns","collections"]),o(y,{columns:e.columns2,collections:a.fees.monthlyFees,totalRow:!0},{header:u(()=>[_t,bt,a.editable?(d(),c("th",yt," ছাড় ")):m("",!0)]),default:u(({item:s})=>[t("td",ft,l(s.fee_name),1),t("td",gt,[t("div",kt,[s.concession?(d(),c("del",vt,l(e.$e2bnumber(s.fee_amount)),1)):m("",!0),t("span",null,l(e.$e2bnumber(s.fee_amount-s.concession)),1)])]),a.editable?(d(),c("td",Ft,[t("div",wt,[o(_,{disabled:!a.editable,type:"number",modelValue:s.concession,"onUpdate:modelValue":x=>s.concession=x,class:"block w-14 px-1 py-0.5 text-right",onInput:x=>r.concessionHandler(s)},null,8,["disabled","modelValue","onUpdate:modelValue","onInput"])])])):m("",!0)]),totalRow:u(()=>[t("th",Tt,[t("div",It,[Vt,r.getConcessionTotal("monthlyFees")?(d(),c("del",jt,l(e.$e2bnumber(r.getFeeTotal("monthlyFees"))),1)):m("",!0),t("span",null,l(e.$e2bnumber(r.getFeeTotal("monthlyFees")-r.getConcessionTotal("monthlyFees"))),1)])]),a.editable?(d(),c("th",Ct,l(r.getConcessionTotal("monthlyFees")),1)):m("",!0)]),_:1},8,["columns","collections"])]),t("div",Lt,[St,t("div",Bt,l(e.$page.props.settings.guardianAgreement),1),t("div",Pt,[t("div",Ht,[o(h,{title:"অভিভাবকের নাম:",value:i.data.student.guardianInfo.name},null,8,["value"])]),t("div",At,[o(h,{title:"অভিভাবকের স্বাক্ষর"})])])]),Et,t("div",Nt,[o(v,{href:e.route("admissions.edit",i.data.admission.id)+"?step=2",class:"rounded-md border border-brand-600 px-4 py-2 font-semibold text-brand-600 hover:bg-brand-700 hover:text-white"},{default:u(()=>[j(" ← পূর্ববর্তী ধাপ ")]),_:1},8,["href"]),o(F,{class:I({"opacity-25":a.form.processing}),disabled:a.form.processing,innerHTML:i.buttonValue},null,8,["class","disabled","innerHTML"])])],32)])],64)}const ae=G(z,[["render",Dt]]);export{ae as default};
