import{i as w,r as u,o as l,c as d,b as t,a as r,d as v,w as m,t as i,n as T,F as I,g as c,e as V}from"./app-47542bc8.js";import{V as j}from"./ValidationErrors-11051cb5.js";import{L as C}from"./Label-c3944de9.js";import{B as P}from"./Button-2675284e.js";import{I as S}from"./Input-e240fc7b.js";import{S as B}from"./Select-1c0f197e.js";import{F as A}from"./FormHeading-e6172ced.js";import{F as E}from"./FormGroup-bbe14fd4.js";import{F as H}from"./FormSlotGroup-e3037e48.js";import{I as N}from"./InlineData-cde6eae2.js";import{S as R}from"./SimpleTable-02a1771e.js";import{T as U}from"./TableTd-a5956665.js";import{T as L}from"./TableTh-aa005c2c.js";import{P as D}from"./PrintButton-f8556e74.js";import{L as O}from"./LetterHead-96c26f72.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./TrashIcon-53b2712e.js";import"./PlusCircleIcon-6c340711.js";import"./PaginatorLinks-952fb437.js";import"./ApplicationLogo-1d2a1eb8.js";const z={components:{Link:w,ValidationErrors:j,Label:C,Button:P,Input:S,Select:B,FormHeading:A,FormGroup:E,FormSlotGroup:H,InlineData:N,SimpleTable:R,TableTd:U,TableTh:L,PrintButton:D,LetterHead:O},props:{moduleAction:String,buttonValue:{type:String,default:"পরবর্তী ধাপ &#8594;"},data:{type:Object,default:{}}},created(){this.dataPushIntoFeeArray("yearlyFees"),this.dataPushIntoFeeArray("monthlyFees"),this.dataPushIntoFeeArray("otherFees")},data(){return{form:this.$inertia.form({step:"fee",fees:[]}),fees:{yearlyFees:[],monthlyFees:[],otherFees:[]},editable:!1}},methods:{submit(){if(this.moduleAction=="update")return this.updateFeeData(),this.form.put(this.route("students.update",this.data.student.id))},concessionHandler(e){e.concession>e.fee_amount&&(e.concession=e.fee_amount),(!e.concession||e.concession<0)&&(e.concession=0),e.concession=Number(e.concession)},dataPushIntoFeeArray(e){Object.values(this.data[e]).forEach(a=>{let p=this.data.admission.concessions.filter(b=>b.id===a.feeId)[0];this.fees[e].push({fee_id:a.feeId,fee_name:a.name,fee_amount:a.amount,concession:p?p.amount:0})})},updateFeeData(){this.form.fees.length=0,this.dataPushIntoFormFees("yearlyFees"),this.dataPushIntoFormFees("monthlyFees"),this.dataPushIntoFormFees("otherFees")},dataPushIntoFormFees(e){this.fees[e].forEach(a=>{a.concession&&this.form.fees.push({id:a.fee_id,amount:a.concession})})},getFeeTotal(e){let a=0;return Object.values(this.fees[e]).forEach(p=>{a+=parseInt(p.fee_amount)}),a},getConcessionTotal(e){let a=0;return Object.values(this.fees[e]).forEach(p=>{a+=parseInt(p.concession)}),a}}},M={class:"flex w-full max-w-3xl justify-end print:hidden"},q={class:"w-full max-w-3xl rounded border bg-white p-4 print:rounded-none print:border-0"},J=t("h2",{class:"mt-4 mb-2 text-center text-2xl font-bold text-brand-600 print:text-black"}," প্রদেয় ফি নির্ধারণ ",-1),K={class:"grid gap-x-2 print:grid-cols-3 md:grid-cols-3"},Q={class:"col-span-2"},W={class:"col-span-2"},X=t("hr",{class:"print:hidden"},null,-1),Y={class:"flex items-center justify-start print:hidden"},Z={class:"flex items-center gap-2"},$=t("span",{class:"-mb-0.5"},"ছাড় পরিবর্তন চালু করুন",-1),tt={class:"grid gap-4 print:grid-cols-2 md:grid-cols-2"},et=t("th",{class:"py-2 px-2 text-left text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," ভর্তিকালীন প্রদেয় ",-1),st=t("th",{class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," নির্ধারিত টাকা ",-1),nt={key:0,class:"py-2 pr-3 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:hidden print:text-black md:text-sm"},ot={class:"whitespace-nowrap py-2 px-2 text-left text-xs font-medium text-gray-900 dark:text-white md:text-sm"},at={class:"whitespace-nowrap py-2 px-2 text-right text-xs font-medium text-gray-900 dark:text-white md:text-sm"},it={class:"flex justify-end gap-2"},rt={key:0,class:"text-gray-400 print:hidden"},lt={key:0,class:"pr-1.5 print:hidden"},dt={class:"flex items-center justify-end"},ct={colspan:"2",class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"},pt={class:"flex justify-end gap-2"},mt=t("span",null,"মোট: ",-1),ht={key:0,class:"text-gray-400 print:hidden"},ut={key:0,class:"pr-2 text-right text-rose-500 print:hidden"},xt=t("th",{class:"py-2 px-2 text-left text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," মাসিক প্রদেয় ",-1),_t=t("th",{class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," নির্ধারিত টাকা ",-1),yt={key:0,class:"py-2 pr-3 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:hidden print:text-black md:text-sm"},bt={class:"whitespace-nowrap py-2 px-2 text-left text-xs font-medium text-gray-900 dark:text-white md:text-sm"},gt={class:"whitespace-nowrap py-2 px-2 text-right text-xs font-medium text-gray-900 dark:text-white md:text-sm"},ft={class:"flex justify-end gap-2"},kt={key:0,class:"text-gray-400 print:hidden"},Ft={key:0,class:"pr-1.5 print:hidden"},wt={class:"flex items-center justify-end"},vt={colspan:"2",class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"},Tt={class:"flex justify-end gap-2"},It=t("span",null,"মোট: ",-1),Vt={key:0,class:"text-gray-400 print:hidden"},jt={key:0,class:"pr-2 text-right text-rose-500 print:hidden"},Ct=t("th",{class:"py-2 px-2 text-left text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," প্রদেয় ",-1),Pt=t("th",{class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"}," নির্ধারিত টাকা ",-1),St={key:0,class:"py-2 pr-3 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:hidden print:text-black md:text-sm"},Bt={class:"whitespace-nowrap py-2 px-2 text-left text-xs font-medium text-gray-900 dark:text-white md:text-sm"},At={class:"whitespace-nowrap py-2 px-2 text-right text-xs font-medium text-gray-900 dark:text-white md:text-sm"},Et={class:"flex justify-end gap-2"},Ht={key:0,class:"text-gray-400 print:hidden"},Nt={key:0,class:"pr-1.5 print:hidden"},Rt={class:"flex items-center justify-end"},Ut={colspan:"2",class:"py-2 px-2 text-right text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"},Lt={class:"flex justify-end gap-2"},Dt=t("span",null,"মোট: ",-1),Ot={key:0,class:"text-gray-400 print:hidden"},Gt={key:0,class:"pr-2 text-right text-rose-500 print:hidden"},zt={class:"hidden print:block"},Mt=t("h3",{class:"mt-10 hidden text-center text-2xl font-bold text-brand-600 print:block print:text-black"}," অভিভাবকের অঙ্গিকার ",-1),qt={class:"whitespace-pre-wrap text-justify"},Jt={class:"flex justify-between"},Kt={class:"pt-10"},Qt={class:"pt-10"},Wt=t("hr",{class:"print:hidden"},null,-1),Xt={class:"flex items-center justify-end print:hidden"};function Yt(e,a,p,b,n,o){const g=u("print-button"),f=u("validation-errors"),k=u("letter-head"),x=u("inline-data"),_=u("Input"),y=u("simple-table"),F=u("Button");return l(),d(I,null,[t("div",M,[r(g)]),t("div",q,[r(f,{class:"mb-4"}),t("form",{onSubmit:a[1]||(a[1]=v((...s)=>o.submit&&o.submit(...s),["prevent"])),class:"space-y-4"},[r(k),J,t("div",K,[t("div",Q,[r(x,{title:"শিক্ষার্থীর নাম:",value:p.data.student.name},null,8,["value"])]),t("div",null,[r(x,{title:"রেজি. নং:",value:p.data.student.registration},null,8,["value"])]),t("div",W,[r(x,{title:"বিভাগ/শ্রেণী:",value:p.data.admission.className},null,8,["value"])]),t("div",null,[r(x,{title:"শিক্ষার্থীর ধরন:",value:p.data.student.residentText},null,8,["value"])])]),X,t("div",Y,[t("label",Z,[r(_,{type:"checkbox",checked:n.editable,onClick:a[0]||(a[0]=s=>n.editable=!n.editable)},null,8,["checked"]),$])]),t("div",tt,[r(y,{collections:n.fees.yearlyFees,totalRow:!0},{header:m(()=>[et,st,n.editable?(l(),d("th",nt," ছাড় ")):c("",!0)]),default:m(({item:s})=>[t("td",ot,i(s.fee_name),1),t("td",at,[t("div",it,[s.concession?(l(),d("del",rt,i(e.$e2bnumber(s.fee_amount)),1)):c("",!0),t("span",null,i(e.$e2bnumber(s.fee_amount-s.concession)),1)])]),n.editable?(l(),d("td",lt,[t("div",dt,[r(_,{disabled:!n.editable,type:"number",modelValue:s.concession,"onUpdate:modelValue":h=>s.concession=h,class:"block w-14 px-1 py-0.5 text-right",onInput:h=>o.concessionHandler(s)},null,8,["disabled","modelValue","onUpdate:modelValue","onInput"])])])):c("",!0)]),totalRow:m(()=>[t("th",ct,[t("div",pt,[mt,o.getConcessionTotal("yearlyFees")?(l(),d("del",ht,i(e.$e2bnumber(o.getFeeTotal("yearlyFees"))),1)):c("",!0),t("span",null,i(e.$e2bnumber(o.getFeeTotal("yearlyFees")-o.getConcessionTotal("yearlyFees"))),1)])]),n.editable?(l(),d("th",ut,i(o.getConcessionTotal("yearlyFees")),1)):c("",!0)]),_:1},8,["collections"]),r(y,{collections:n.fees.monthlyFees,totalRow:!0},{header:m(()=>[xt,_t,n.editable?(l(),d("th",yt," ছাড় ")):c("",!0)]),default:m(({item:s})=>[t("td",bt,i(s.fee_name),1),t("td",gt,[t("div",ft,[s.concession?(l(),d("del",kt,i(e.$e2bnumber(s.fee_amount)),1)):c("",!0),t("span",null,i(e.$e2bnumber(s.fee_amount-s.concession)),1)])]),n.editable?(l(),d("td",Ft,[t("div",wt,[r(_,{disabled:!n.editable,type:"number",modelValue:s.concession,"onUpdate:modelValue":h=>s.concession=h,class:"block w-14 px-1 py-0.5 text-right",onInput:h=>o.concessionHandler(s)},null,8,["disabled","modelValue","onUpdate:modelValue","onInput"])])])):c("",!0)]),totalRow:m(()=>[t("th",vt,[t("div",Tt,[It,o.getConcessionTotal("monthlyFees")?(l(),d("del",Vt,i(e.$e2bnumber(o.getFeeTotal("monthlyFees"))),1)):c("",!0),t("span",null,i(e.$e2bnumber(o.getFeeTotal("monthlyFees")-o.getConcessionTotal("monthlyFees"))),1)])]),n.editable?(l(),d("th",jt,i(o.getConcessionTotal("monthlyFees")),1)):c("",!0)]),_:1},8,["collections"]),r(y,{collections:n.fees.otherFees,totalRow:!0},{header:m(()=>[Ct,Pt,n.editable?(l(),d("th",St," ছাড় ")):c("",!0)]),default:m(({item:s})=>[t("td",Bt,i(s.fee_name),1),t("td",At,[t("div",Et,[s.concession?(l(),d("del",Ht,i(e.$e2bnumber(s.fee_amount)),1)):c("",!0),t("span",null,i(e.$e2bnumber(s.fee_amount-s.concession)),1)])]),n.editable?(l(),d("td",Nt,[t("div",Rt,[r(_,{disabled:!n.editable,type:"number",modelValue:s.concession,"onUpdate:modelValue":h=>s.concession=h,class:"block w-14 px-1 py-0.5 text-right",onInput:h=>o.concessionHandler(s)},null,8,["disabled","modelValue","onUpdate:modelValue","onInput"])])])):c("",!0)]),totalRow:m(()=>[t("th",Ut,[t("div",Lt,[Dt,o.getConcessionTotal("otherFees")?(l(),d("del",Ot,i(e.$e2bnumber(o.getFeeTotal("otherFees"))),1)):c("",!0),t("span",null,i(e.$e2bnumber(o.getFeeTotal("otherFees")-o.getConcessionTotal("otherFees"))),1)])]),n.editable?(l(),d("th",Gt,i(o.getConcessionTotal("otherFees")),1)):c("",!0)]),_:1},8,["collections"])]),t("div",zt,[Mt,t("div",qt,i(e.$page.props.settings.guardianAgreement),1),t("div",Jt,[t("div",Kt,[r(x,{title:"অভিভাবকের নাম:",value:p.data.student.guardianInfo.name},null,8,["value"])]),t("div",Qt,[r(x,{title:"অভিভাবকের স্বাক্ষর"})])])]),Wt,t("div",Xt,[r(F,{class:T({"opacity-25":n.form.processing}),disabled:n.form.processing},{default:m(()=>[V(" Save ")]),_:1},8,["class","disabled"])])],32)])],64)}const be=G(z,[["render",Yt]]);export{be as default};
