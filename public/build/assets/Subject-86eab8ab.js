import{A as M}from"./GridApp-da8eb0a1.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{C as S,E as T}from"./Index-381fcbc5.js";import{Z as A,i as O,r as h,o as d,c,a as u,w as f,F as m,b as e,e as k,t as i,f as p,n as v,g as E}from"./app-92b5b829.js";import{r as B}from"./ArrowLeftIcon-bc402536.js";import{S as C}from"./SimpleTable-f7fa4bd4.js";import{T as F}from"./TableTd-0861edc0.js";import{P}from"./PrintButton-b0866b6f.js";import{L as G}from"./LetterHead-11e39293.js";import"./Index-dea2134a.js";import"./ApplicationLogo-6b91dc49.js";import"./Label-ad23df54.js";import"./PaginatorLinks-15bc8b7e.js";const H={components:{AppLayout:M,Head:A,Link:O,ClassSvg:S,ExamSvg:T,ArrowLeftIcon:B,SimpleTable:C,TableTd:F,PrintButton:P,LetterHead:G},created(){Object.values(this.data.subjects).forEach(r=>{this.columns.push({title:`${r.name} (${this.$e2bnumber(r.code)})`,align:"left",class:"-rotate-90 -m-4"})})},props:{data:{type:Object,default:{}},signature:{type:String,default:""}},data(){return{columns:[{title:"রোল",align:"right"},{title:"শিক্ষার্থী",align:"left"}]}},methods:{getSubjectMark(r,l){let t=Object.values(this.data.results).find(n=>Number(n.subject_code)===Number(l.code));if(!t)return"";let o=t.marks.find(n=>Number(n.student_id)===Number(r.id));return o&&(o.speaking!==""||o.writing!=="")?Number(o.speaking||0)+Number(o.writing||0):""},getTotalMark(r){let l=0;return Object.values(this.data.subjects).forEach(t=>{let o=Object.values(this.data.results).find(n=>Number(n.subject_code)===Number(t.code));if(o){let n=Object.values(o.marks).find(a=>Number(a.student_id)===Number(r.id));n&&(l+=Number(n.speaking)+Number(n.writing))}}),l||""},getAverageMark(r){let l=this.getTotalMark(r),t=0;return Object.values(this.data.subjects).forEach(o=>{if(Number(o.code)===Number(this.data.class.optional_subject_code))return;let n=Object.values(this.data.results).find(a=>Number(a.subject_code)===Number(o.code));if(n){let a=Object.values(n.marks).find(b=>Number(b.student_id)===Number(r.id));a&&(a.speaking!==""||a.writing!=="")&&t++}}),t&&l?Number(l/t).toFixed(2):""},getMinSubjectMark(r){const l=[];return Object.values(this.data.subjects).forEach(t=>{if(Number(t.code)===Number(this.data.class.optional_subject_code))return;let o=Object.values(this.data.results).find(n=>Number(n.subject_code)===Number(t.code));if(o){let n=Object.values(o.marks).find(a=>Number(a.student_id)===Number(r.id));n&&(n.speaking!==""||n.writing!=="")&&l.push(Number(n.speaking)+Number(n.writing))}}),Math.min.apply(Math,l.map(t=>Number(t)))},getGrade(r){if(this.getMinSubjectMark(r)<35)return"F";let t=this.getAverageMark(r);return t===""?"":t>=80?"A+":t>=70?"A":t>=60?"A-":t>=50?"B":t>=40?"C":t>=33?"D":"F"},getMeritList(r){let l=this.getTotalMark(r);if(l==="")return"-";let t=[];Object.values(this.data.students).forEach(a=>{let b=this.getTotalMark(a);b&&this.getGrade(a)!=="F"&&t.push(b)}),t.sort((a,b)=>a-b).reverse(),t=[...new Set([...t])];let n=t.indexOf(l)+1;return this.getMeritTextByPosition(n)},getMeritTextByPosition(r){return parseInt(r)===0?"-":r}}},I={class:"w-full flex items-center justify-between py-2 print:hidden"},V={class:"grid w-full space-y-2 bg-white relative -z-20 overflow-hidden px-6 py-4 print:py-0 print:px-4"},z={class:"absolute inset-0 w-full h-full -z-10 flex justify-center items-center"},D=["src"],Z={class:"flex items-center justify-center gap-4 text-lg font-bold"},q={class:"flex items-center justify-center gap-1"},J=e("div",{class:""},"শ্রেণী",-1),K=e("span",null,":",-1),Q=e("div",{class:"mt-1.5 mb-2 flex items-center justify-center"},[e("div",{class:"rounded-md border px-4 py-0.5 text-center text-2xl font-bold print:border-black print:text-black"}," ফলাফল ")],-1),R={class:"w-full table-auto print:text-xs"},U={class:""},W={class:""},X=e("th",{colspan:"2",class:"border p-2 print:h-[120px] print:p-1"}," কৃতকার্য শিক্ষার্থী তালিকা ",-1),Y={class:"h-full -rotate-180 break-all text-left"},$=e("th",{colspan:"4",class:"border p-2 print:p-1"},null,-1),ee=e("th",{class:"border p-2 print:p-1"},"রোল",-1),te=e("th",{class:"border p-2 print:p-1"},"শিক্ষার্থী",-1),re={class:"text-center"},se=e("th",{class:"border p-2 print:p-1"},"মোট",-1),ae=e("th",{class:"border p-2 print:p-1"},"গড়",-1),ne=e("th",{class:"border p-2 print:p-1"},"গ্রেড",-1),ie=e("th",{class:"border p-2 print:p-1"},"মেধাক্রম",-1),le={class:""},oe={class:"border p-2 text-center print:p-1"},de={class:"border p-2 text-left print:p-1"},ce={class:"border p-2 text-center print:p-1"},ue={class:"border p-2 text-center print:p-1"},be={class:"border p-2 text-center print:p-1"},me={class:"border p-2 text-center print:p-1"},pe={class:"w-full table-auto print:text-xs"},he={class:""},_e=e("tr",{class:""},[e("th",{colspan:"2"},"অকৃতকার্য শিক্ষার্থী তালিকা")],-1),fe=e("th",{class:"border p-2 print:p-1"},"রোল",-1),ge=e("th",{class:"border p-2 print:p-1"},"শিক্ষার্থী",-1),ke={class:"text-center"},xe=e("th",{class:"border p-2 print:p-1"},"মোট",-1),ve=e("th",{class:"border p-2 print:p-1"},"গড়",-1),ye=e("th",{class:"border p-2 print:p-1"},"গ্রেড",-1),je=e("th",{class:"border p-2 print:p-1"},"মেধাক্রম",-1),Ne={class:""},we={class:"border p-2 text-center print:p-1"},Me={class:"border p-2 text-left print:p-1"},Le={class:"border p-2 text-center print:p-1"},Se={class:"border p-2 text-center print:p-1"},Te={class:"border p-2 text-center print:p-1"},Ae={class:"border p-2 text-center print:p-1"},Oe={class:"flex w-full justify-end"},Ee={class:"mt-2 flex flex-col items-end justify-center"},Be={class:"flex h-[40px] max-w-[100px] items-center justify-center"},Ce=["src"],Fe=e("div",{class:"flex items-center justify-center"},[e("p",{class:"text-sm font-bold"},"অধ্যক্ষের স্বাক্ষর")],-1);function Pe(r,l,t,o,n,a){const b=h("Head"),y=h("ArrowLeftIcon"),g=h("Link"),j=h("print-button"),N=h("letter-head"),w=h("app-layout");return d(),c(m,null,[u(b,{title:`${t.data.exam.name} : ${t.data.class.name} ক্লাস এর বিষয় সমুহ`},null,8,["title"]),u(w,{pageTitle:`${t.data.exam.name} : ${t.data.class.name} ক্লাস এর বিষয় সমুহ`},{default:f(()=>[e("div",I,[u(g,{href:r.route("results.classes",[t.data.exam.id])+"?session="+r.$page.props.current_academic_session.value,class:"flex items-center justify-center gap-2 rounded-md bg-gray-600 px-4 py-1 text-white"},{default:f(()=>[u(y,{class:"w-5"}),k(" পূর্বের পেজ ")]),_:1},8,["href"]),u(g,{href:r.route("results.result-cards",[t.data.exam.id,t.data.class.id])+"?session="+r.$page.props.current_academic_session.value,class:"flex items-center justify-center gap-2 rounded-md bg-brand-600 px-4 py-1 text-white"},{default:f(()=>[k(" রেজাল্ট কার্ড ")]),_:1},8,["href"]),u(j)]),e("div",V,[e("div",z,[e("img",{class:"opacity-10",src:r.$page.props.settings.logoLink},null,8,D)]),u(N),e("div",Z,[e("div",null,i(t.data.exam.name),1),e("div",null,i(r.$e2bnumber(t.data.exam.session))+" হিজরি",1)]),e("div",q,[J,K,e("div",null,i(t.data.class.name),1)]),Q,e("table",R,[e("thead",U,[e("tr",W,[X,(d(!0),c(m,null,p(t.data.subjects,s=>(d(),c("th",{key:s.code,class:"max-h-[220px] border p-2 print:h-[120px] print:p-1",style:{"writing-mode":"vertical-rl"}},[e("div",Y,i(s.name),1)]))),128)),$]),e("tr",null,[ee,te,(d(!0),c(m,null,p(t.data.subjects,s=>(d(),c("th",{key:s.code,class:"border p-2 print:p-1"},[e("div",re,[u(g,{href:r.route("results.create",[t.data.exam.id,t.data.class.id,s.code])+"?session="+r.$page.props.current_academic_session.value,class:"text-brand-600 underline print:text-black print:no-underline"},{default:f(()=>[k(i(r.$e2bnumber(s.code)),1)]),_:2},1032,["href"])])]))),128)),se,ae,ne,ie])]),e("tbody",le,[(d(!0),c(m,null,p(t.data.students,(s,x)=>(d(),c("tr",{key:x,class:v(["hover:bg-gray-100 dark:hover:bg-gray-700",{hidden:a.getMeritList(s)==="-"}])},[e("td",oe,i(r.$e2bnumber(s.roll)),1),e("td",de,i(s.name),1),(d(!0),c(m,null,p(t.data.subjects,_=>(d(),c("td",{key:_.code,class:"border p-2 text-center print:p-1"},i(r.$e2bnumber(a.getSubjectMark(s,_))),1))),128)),e("td",ce,i(r.$e2bnumber(a.getTotalMark(s))),1),e("td",ue,i(r.$e2bnumber(a.getAverageMark(s))),1),e("td",be,i(r.$e2bnumber(a.getGrade(s))),1),e("td",me,i(r.$e2bnumber(a.getMeritList(s))),1)],2))),128))])]),e("table",pe,[e("thead",he,[_e,e("tr",null,[fe,ge,(d(!0),c(m,null,p(t.data.subjects,s=>(d(),c("th",{key:s.code,class:"border p-2 print:p-1"},[e("div",ke,[u(g,{href:r.route("results.create",[t.data.exam.id,t.data.class.id,s.code]),class:"text-brand-600 underline print:text-black print:no-underline"},{default:f(()=>[k(i(r.$e2bnumber(s.code)),1)]),_:2},1032,["href"])])]))),128)),xe,ve,ye,je])]),e("tbody",Ne,[(d(!0),c(m,null,p(t.data.students,(s,x)=>(d(),c("tr",{key:x,class:v(["hover:bg-gray-100 dark:hover:bg-gray-700",{hidden:a.getMeritList(s)!=="-"}])},[e("td",we,i(r.$e2bnumber(s.roll)),1),e("td",Me,i(s.name),1),(d(!0),c(m,null,p(t.data.subjects,_=>(d(),c("td",{key:_.code,class:"border p-2 text-center print:p-1"},i(r.$e2bnumber(a.getSubjectMark(s,_))),1))),128)),e("td",Le,i(r.$e2bnumber(a.getTotalMark(s))),1),e("td",Se,i(r.$e2bnumber(a.getAverageMark(s))),1),e("td",Te,i(r.$e2bnumber(a.getGrade(s))),1),e("td",Ae,i(r.$e2bnumber(a.getMeritList(s))),1)],2))),128))])]),e("div",Oe,[e("div",Ee,[e("div",Be,[t.signature?(d(),c("img",{key:0,src:t.signature,class:"h-full w-full object-contain"},null,8,Ce)):E("",!0)]),Fe])])])]),_:1},8,["pageTitle"])],64)}const We=L(H,[["render",Pe]]);export{We as default};
