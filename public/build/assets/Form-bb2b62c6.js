import{V as B}from"./ValidationErrors-e0eac0bb.js";import{r as m,o as s,c as d,a,b as r,w as l,n as N,d as q,F as g,f as b,t as h,h as _,g as V,e as y}from"./app-734b9270.js";import{r as A}from"./PlusCircleIcon-ffceedca.js";import{r as O}from"./TrashIcon-71147c3a.js";import{B as E}from"./Button-249f51de.js";import{I as H}from"./Input-5cf5d65e.js";import{S as M}from"./Select-cdbce0bc.js";import{T as G}from"./Textarea-1d63cf0c.js";import{A as I,F as L}from"./FormSlotGroup-f5d6c268.js";import{F as R}from"./FormGroup-995b009c.js";import{S as z}from"./SimpleTable-a088b771.js";import{T as D}from"./TableTd-96a359f6.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./Label-ebc88c84.js";import"./PaginatorLinks-cb9477dc.js";const J={components:{ValidationErrors:B,Button:E,Input:H,Select:M,Textarea:G,TrashIcon:O,PlusCircleIcon:A,AddButton:I,FormSlotGroup:L,FormGroup:R,SimpleTable:z,TableTd:D},props:{moduleAction:String,buttonValue:{type:String,default:"Save"},data:{type:Object,default:{}}},created(){this.form.subjects=this.data.classes.subjects||[],Object.values(this.data.fees).forEach(u=>{let o=Object.values(this.data.classes.classFees).filter(c=>c.feeId==u.id)[0];this.form.fees.push({id:u.id,name:u.name,period:u.period,amount:o?o.amount:"",package:o?o.package:[],checked:o?1:0})})},data(){return{form:this.$inertia.form({name:this.data.classes.name,staff_id:this.data.classes.staffId,description:this.data.classes.description,subjects:[],fees:[]}),columns1:[{title:"ভর্তিকালীন প্রদেয়",align:"left"},{title:"পরিমাণ",align:"center"}],columns2:[{title:"মাসিক প্রদেয়",align:"left"},{title:"পরিমাণ",align:"center"}],columns3:[{title:"খন্ডকালীন প্রদেয়",align:"left"},{title:"পরিমাণ",align:"center"}]}},methods:{addSubjectSlot(){this.form.subjects.push({name:"",book:""})},packageHandler(u,o,c){if(u.target.checked)return o.package.push(c);const p=o.package.indexOf(c);p>-1&&o.package.splice(p,1)},submit(){if(this.moduleAction=="store")return this.form.post(this.route("classes.store"));if(this.moduleAction=="update")return this.form.put(this.route("classes.update",this.data.classes.id))},getFeeTotal(u,o){let c=0;return Object.values(this.form.fees).forEach(p=>{p.checked&&p.period===u&&p.package.includes(o)&&(c+=parseInt(p.amount))}),c}}},K={class:"w-full max-w-3xl rounded border bg-white p-4 shadow"},Q={class:"grid gap-4"},W={class:"flex gap-2"},X={class:"w-full overflow-auto"},Y={class:"flex w-full items-center justify-start gap-2"},Z={class:"px-3 text-center"},$={class:"mx-auto w-20"},ee={class:"w-full overflow-auto"},te={class:"flex w-full items-center justify-start gap-2"},le={class:"px-3 text-center"},ae={class:"mx-auto w-20"},oe=r("option",{value:""},"-- নির্বাচন করুন --",-1),se=["value"],ce=r("hr",{class:"my-4 w-full"},null,-1),re={class:"flex items-center justify-end"};function ne(u,o,c,p,n,k){const C=m("validation-errors"),i=m("Input"),w=m("form-group"),T=m("Textarea"),F=m("form-slot-group"),f=m("table-td"),S=m("simple-table"),j=m("Select"),U=m("Button");return s(),d("div",K,[a(C,{class:"mb-4"}),r("form",{onSubmit:o[3]||(o[3]=q((...e)=>k.submit&&k.submit(...e),["prevent"])),class:""},[r("div",Q,[r("div",W,[a(w,{class:"flex-grow",label:"ক্লাস/বিভাগের নাম"},{default:l(()=>[a(i,{type:"text",class:"block w-full",modelValue:n.form.name,"onUpdate:modelValue":o[0]||(o[0]=e=>n.form.name=e),required:""},null,8,["modelValue"])]),_:1})]),a(w,{class:"w-full",label:"ক্লাস/বিভাগ সম্পর্কে তথ্য"},{default:l(()=>[a(T,{class:"block h-40 w-full text-sm md:h-32 md:text-lg",modelValue:n.form.description,"onUpdate:modelValue":o[1]||(o[1]=e=>n.form.description=e)},null,8,["modelValue"])]),_:1}),a(F,{label:"বিষয় যুক্ত করুন",collections:n.form.subjects,addSlotMethod:k.addSubjectSlot},{default:l(({item:e})=>[a(w,{label:"বিষয়ের নাম",class:"w-full md:w-1/3"},{default:l(()=>[a(i,{type:"text",class:"block w-full",modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(w,{label:"কিতাবের নাম (একাধিক হলে কমা ব্যবহার করুন)",class:"w-full md:w-2/3"},{default:l(()=>[a(i,{type:"text",class:"block w-full",modelValue:e.book,"onUpdate:modelValue":t=>e.book=t,required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1},8,["collections","addSlotMethod"]),r("div",X,[a(S,{columns:n.columns1,collections:n.form.fees,"filter-row-name":"period","filter-row-value":1,"total-row":!0},{header:l(()=>[(s(!0),d(g,null,b(c.data.packages,(e,t)=>(s(),d("th",{key:t,class:"py-3 px-2 text-center text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"},h(e),1))),128))]),default:l(({item:e})=>[a(f,{class:"whitespace-pre-wrap text-left"},{default:l(()=>[r("label",Y,[a(i,{type:"checkbox",onClick:t=>e.checked=!e.checked,checked:e.checked},null,8,["onClick","checked"]),r("span",null,h(e.name),1)])]),_:2},1024),r("td",Z,[r("div",$,[e.checked?(s(),_(i,{key:0,type:"number",modelValue:e.amount,"onUpdate:modelValue":t=>e.amount=t,class:"w-20 text-right",required:""},null,8,["modelValue","onUpdate:modelValue"])):V("",!0)])]),(s(!0),d(g,null,b(c.data.packages,(t,x)=>(s(),_(f,{key:x,class:"text-center"},{default:l(()=>[e.checked?(s(),_(i,{key:0,type:"checkbox",onChange:v=>k.packageHandler(v,e,x),checked:e.package.includes(x)},null,8,["onChange","checked"])):V("",!0)]),_:2},1024))),128))]),totalRow:l(()=>[a(f,{class:"text-right",colspan:"2"},{default:l(()=>[y(" মোট ভর্তিকালীন প্রদেয় ")]),_:1}),(s(!0),d(g,null,b(c.data.packages,(e,t)=>(s(),_(f,{key:t,class:"text-center"},{default:l(()=>[y(h(k.getFeeTotal(1,t)),1)]),_:2},1024))),128))]),_:1},8,["columns","collections"])]),r("div",ee,[a(S,{columns:n.columns2,collections:n.form.fees,"filter-row-name":"period","filter-row-value":2,"total-row":!0},{header:l(()=>[(s(!0),d(g,null,b(c.data.packages,(e,t)=>(s(),d("th",{key:t,class:"py-3 px-2 text-center text-xs font-bold uppercase tracking-wider text-gray-700 dark:text-gray-400 print:text-black md:text-sm"},h(e),1))),128))]),default:l(({item:e})=>[a(f,{class:"whitespace-pre-wrap text-left"},{default:l(()=>[r("label",te,[a(i,{type:"checkbox",onClick:t=>e.checked=!e.checked,checked:e.checked},null,8,["onClick","checked"]),r("span",null,h(e.name),1)])]),_:2},1024),r("td",le,[r("div",ae,[e.checked?(s(),_(i,{key:0,type:"number",modelValue:e.amount,"onUpdate:modelValue":t=>e.amount=t,class:"w-20 text-right",required:""},null,8,["modelValue","onUpdate:modelValue"])):V("",!0)])]),(s(!0),d(g,null,b(c.data.packages,(t,x)=>(s(),_(f,{key:x,class:"text-center"},{default:l(()=>[e.checked?(s(),_(i,{key:0,type:"checkbox",onChange:v=>k.packageHandler(v,e,x),checked:e.package.includes(x)},null,8,["onChange","checked"])):V("",!0)]),_:2},1024))),128))]),totalRow:l(()=>[a(f,{colspan:"2",class:"text-right"},{default:l(()=>[y(" মোট মাসিক প্রদেয় ")]),_:1}),(s(!0),d(g,null,b(c.data.packages,(e,t)=>(s(),_(f,{key:t,class:"text-center"},{default:l(()=>[y(h(k.getFeeTotal(2,t)),1)]),_:2},1024))),128))]),_:1},8,["columns","collections"])]),a(w,{class:"col-span-full",label:"শ্রেণী শিক্ষক"},{default:l(()=>[a(j,{modelValue:n.form.staff_id,"onUpdate:modelValue":o[2]||(o[2]=e=>n.form.staff_id=e),class:"block w-full"},{default:l(()=>[oe,(s(!0),d(g,null,b(c.data.staffList,(e,t)=>(s(),d("option",{key:t,value:e.id},h(e.name),9,se))),128))]),_:1},8,["modelValue"])]),_:1})]),ce,r("div",re,[a(U,{class:N(["",{"opacity-25":n.form.processing}]),disabled:n.form.processing},{default:l(()=>[y(h(c.buttonValue),1)]),_:1},8,["class","disabled"])])],32)])}const ve=P(J,[["render",ne]]);export{ve as default};
